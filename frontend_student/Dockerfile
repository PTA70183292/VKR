FROM python:3.10-slim                                       
# Используем официальный облегченный образ Python 3.10 на базе Debian.

WORKDIR /app                                                
# Устанавливаем /app как основную рабочую директорию внутри контейнера.

RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*                   
# Обновляем индексы пакетов и устанавливаем системные утилиты. 
# Устанавливаем curl (может понадобиться для проверки здоровья сервиса/healthcheck). 
# Удаляем кэш apt-get, чтобы уменьшить финальный размер образа.
    

COPY requirements.txt .                                     
# Копируем список библиотек первыми (для эффективного кэширования слоев Docker)

RUN pip install --default-timeout=1000 -r requirements.txt  
# Устанавливаем зависимости (флаг timeout помогает при медленном интернете).

COPY . .                                                    
# Копируем исходный код приложения в рабочую директорию контейнера.

# Порт 8502, чтобы не конфликтовать с основным приложением (если запускать локально)
# В docker-compose мы настроим порты отдельно
CMD ["streamlit", "run", "app.py", "--server.port=8501", "--server.address=0.0.0.0"]
# Запускаем Streamlit на внутреннем порту 8501, слушая все интерфейсы (0.0.0.0).