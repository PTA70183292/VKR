FROM python:3.10-slim
# Указываем базовый образ Python 3.10 (версия slim для уменьшения размера образа)

WORKDIR /app
# Устанавливаем рабочую директорию внутри контейнера (/app), где будет лежать проект

RUN apt-get update && apt-get install -y \
    curl \
    && rm -rf /var/lib/apt/lists/*
# Обновляем списки пакетов Linux, устанавливаем curl (полезен для проверки доступности сервисов)
# и сразу удаляем кэш apt (rm -rf ...), чтобы уменьшить итоговый размер образа

COPY requirements.txt .
# Копируем файл зависимостей в рабочую директорию контейнера

RUN pip install --default-timeout=1000 -r requirements.txt
# Устанавливаем Python-библиотеки. Флаг timeout=1000 предотвращает разрывы связи при медленном интернете

COPY . .
# Копируем все остальные файлы проекта (app.py, папки и т.д.) в контейнер

# Команда запуска Streamlit
CMD ["streamlit", "run", "app.py", "--server.port=8501", "--server.address=0.0.0.0"]
# Запускаем приложение:
# --server.port=8501: порт, который слушает Streamlit
# --server.address=0.0.0.0: разрешает подключения извне контейнера (важно для Docker)